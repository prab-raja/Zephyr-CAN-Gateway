{
  "name": "Zephyr CAN Gateway Development",
  "image": "zephyrprojectrtos/ci:latest",
  
  "features": {
    "ghcr.io/devcontainers/features/git:1": {},
    "ghcr.io/devcontainers/features/common-utils:2": {
      "installZsh": true,
      "installOhMyZsh": true
    }
  },

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-vscode.cpptools",
        "ms-vscode.cpptools-extension-pack",
        "ms-vscode.cmake-tools",
        "twxs.cmake",
        "zephyr-ide.zephyr-ide",
        "ms-vscode.hexeditor",
        "marus25.cortex-debug"
      ],
      "settings": {
        "C_Cpp.default.compilerPath": "/opt/toolchains/zephyr-sdk-0.16.5/arm-zephyr-eabi/bin/arm-zephyr-eabi-gcc",
        "C_Cpp.default.intelliSenseMode": "gcc-arm",
        "cmake.configureOnOpen": false,
        "files.associations": {
          "*.overlay": "dts",
          "*.conf": "kconfig"
        }
      }
    }
  },

  "postCreateCommand": "bash .devcontainer/setup.sh",
  
  "remoteUser": "user",
  
  "mounts": [
    "source=${localWorkspaceFolder}/.zephyr-cache,target=/home/user/.cache/zephyr,type=bind,consistency=cached"
  ],

  "containerEnv": {
    "ZEPHYR_TOOLCHAIN_VARIANT": "zephyr",
    "ZEPHYR_SDK_INSTALL_DIR": "/opt/toolchains/zephyr-sdk-0.16.5"
  }
}